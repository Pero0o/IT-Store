<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IT Store - Replace Device</title>
<link rel="stylesheet" href="../assets/css/style.css">
</head>
<body>
<div class="container">
  <h1>Replace Device</h1>
  <form id="replaceForm">
    <label for="oldSerial">Old Device Serial</label>
    <input type="text" id="oldSerial" placeholder="Enter old serial" required>

    <label for="newSerial">New Device Serial</label>
    <input type="text" id="newSerial" placeholder="Enter new serial" required>

    <label for="replacedBy">Replaced By</label>
    <input type="text" id="replacedBy" placeholder="Your name" required>

    <label for="reason">Reason</label>
    <textarea id="reason" rows="3" placeholder="Reason for replacement"></textarea>

    <button type="submit" class="btn">Replace</button>
    <button type="button" id="clearBtn" class="btn outline">Clear</button>
  </form>

  <h3>Replacement Records</h3>
  <table class="table" id="replaceTable">
    <thead>
      <tr>
        <th>Old Serial</th>
        <th>New Serial</th>
        <th>Replaced By</th>
        <th>Reason</th>
      </tr>
    </thead>
    <tbody id="replaceRows"></tbody>
  </table>
</div>

<script>
const replaceForm = document.getElementById('replaceForm');
const replaceRows = document.getElementById('replaceRows');
const storedReplacements = JSON.parse(localStorage.getItem('itstore_replacements') || '[]');

function renderReplacements(){
  replaceRows.innerHTML = '';
  storedReplacements.forEach(r => {
    replaceRows.innerHTML += `
      <tr>
        <td>${r.oldSerial}</td>
        <td>${r.newSerial}</td>
        <td>${r.replacedBy}</td>
        <td>${r.reason}</td>
      </tr>`;
  });
}

replaceForm.addEventListener('submit', e => {
  e.preventDefault();
  const replacement = {
    oldSerial: document.getElementById('oldSerial').value,
    newSerial: document.getElementById('newSerial').value,
    replacedBy: document.getElementById('replacedBy').value,
    reason: document.getElementById('reason').value
  };
  storedReplacements.push(replacement);
  localStorage.setItem('itstore_replacements', JSON.stringify(storedReplacements));
  renderReplacements();
  replaceForm.reset();
  alert('Device replaced successfully!');
});

document.getElementById('clearBtn').addEventListener('click', () => replaceForm.reset());

renderReplacements();
</script>
</body>
</html>
